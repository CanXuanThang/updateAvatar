{"ast":null,"code":"import { RESPONSE_STATUS_UNAUTHORIZED } from '../../../utils/httpResponseCode';\nimport { ACCESS_TOKEN_KEY } from '../../../utils/constants';\nimport Cookies from 'js-cookie';\nimport axios from 'axios';\nexport function callApi(url) {\n  return async (dispatch, getState) => {\n    const res = await axios(url, {\n      headers: {\n        Authorization: 'Bearer ' + Cookies.get(ACCESS_TOKEN_KEY) || ''\n      }\n    });\n    const json = await res.data();\n\n    if (res.status === RESPONSE_STATUS_UNAUTHORIZED) {// dispatch logout, remove access token here.\n    }\n\n    return json; // throw new Error('Error');\n  };\n}","map":{"version":3,"sources":["C:/Users/thang/Downloads/Code structure/src/modules/common/redux/thunk.ts"],"names":["RESPONSE_STATUS_UNAUTHORIZED","ACCESS_TOKEN_KEY","Cookies","axios","callApi","url","dispatch","getState","res","headers","Authorization","get","json","data","status"],"mappings":"AAGA,SAASA,4BAAT,QAA6C,iCAA7C;AACA,SAASC,gBAAT,QAAiC,0BAAjC;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,SAASC,OAAT,CAAiBC,GAAjB,EAAyF;AAC9F,SAAO,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;AACnC,UAAMC,GAAG,GAAG,MAAML,KAAK,CAACE,GAAD,EAAM;AAC3BI,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,YAAYR,OAAO,CAACS,GAAR,CAAYV,gBAAZ,CAAZ,IAA6C;AADrD;AADkB,KAAN,CAAvB;AAMA,UAAMW,IAAI,GAAG,MAAMJ,GAAG,CAACK,IAAJ,EAAnB;;AAEA,QAAIL,GAAG,CAACM,MAAJ,KAAed,4BAAnB,EAAiD,CAC/C;AACD;;AAED,WAAOY,IAAP,CAbmC,CAcnC;AACD,GAfD;AAgBD","sourcesContent":["import { Action } from 'redux';\nimport { ThunkAction } from 'redux-thunk';\nimport { AppState } from '../../../redux/reducer';\nimport { RESPONSE_STATUS_UNAUTHORIZED } from '../../../utils/httpResponseCode';\nimport { ACCESS_TOKEN_KEY } from '../../../utils/constants';\nimport Cookies from 'js-cookie';\nimport axios from 'axios';\n\nexport function callApi(url: string): ThunkAction<Promise<any>, AppState, null, Action<string>> {\n  return async (dispatch, getState) => {\n    const res = await axios(url, {\n      headers: {\n        Authorization: 'Bearer ' + Cookies.get(ACCESS_TOKEN_KEY) || '',\n      },\n    });\n\n    const json = await res.data();\n\n    if (res.status === RESPONSE_STATUS_UNAUTHORIZED) {\n      // dispatch logout, remove access token here.\n    }\n\n    return json;\n    // throw new Error('Error');\n  };\n}\n"]},"metadata":{},"sourceType":"module"}